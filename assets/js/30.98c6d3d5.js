(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{537:function(e,a,n){"use strict";n.r(a);var r=n(2),s=Object(r.a)({},(function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h2",{attrs:{id:"graphql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#graphql"}},[e._v("#")]),e._v(" GraphQL")]),e._v(" "),n("p",[e._v("GraphQl 全称Graph Query Language(SQL: Structured Query Language), 用的是越来越多了。完全代替rest是不可能的，不过一旦设计需要使用Graphql去fetch data的时候，不懂原理的话写起来就会很麻烦。")]),e._v(" "),n("h3",{attrs:{id:"basic"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#basic"}},[e._v("#")]),e._v(" Basic")]),e._v(" "),n("p",[e._v("GraphQl的 Operation Name 分为读取的"),n("code",[e._v("query")]),e._v("，修改的"),n("code",[e._v("mutation")]),e._v(", 和订阅修改的"),n("code",[e._v("subscription")]),e._v("。\n所有的"),n("code",[e._v("{}")]),e._v("为"),n("code",[e._v("root")]),e._v("的都是"),n("code",[e._v("query")]),e._v(", 就像js的匿名函数，所以为了明确最好给一个有意义名字。\n其他terms,"),n("code",[e._v("argument")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("{\n  viewer{\n    login\n  }\n}\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("query getLoginUser {\n  viewer{\n    login\n  }\n}\n")])])]),n("h3",{attrs:{id:"fragment"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fragment"}},[e._v("#")]),e._v(" Fragment")]),e._v(" "),n("p",[e._v("当涉及重复片段时，"),n("code",[e._v("Fragment")]),e._v("是一种解决方法。\n"),n("em",[e._v("empireHero: hero")]),e._v(" 是出现重复key时的alias。")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("query HeroNameAndFriends {\n  empireHero: hero(episode: EMPIRE) {\n    name\n    appearsIn\n    friends {\n      name\n    }\n  }\n  jediHero: hero(episode: JEDI) {\n    name\n    appearsIn\n    friends {\n      name\n    }\n  }\n}\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("query HeroNameAndFriends {\n  empireHero: hero(episode: EMPIRE) {\n    name\n  appearsIn\n  friends {\n    name\n  }\n  }\n  jediHero: hero(episode: JEDI) {\n    ...heroFields\n  }\n}\n\nfragment heroFields on Character {\n  name\n  appearsIn\n  friends {\n    name\n  }\n}\n\n")])])]),n("h3",{attrs:{id:"定义查询时的variables"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#定义查询时的variables"}},[e._v("#")]),e._v(" 定义查询时的"),n("code",[e._v("Variables")])]),e._v(" "),n("p",[e._v("定义变量的方法，"),n("code",[e._v("$...")]),e._v(",并定义类型。\n再以JSON的方式指定"),n("code",[e._v("Query Variables")]),e._v("。\noptional or required "),n("code",[e._v("$episode: Episode!")]),e._v(", "),n("code",[e._v("!")]),e._v("就是requried。")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("query HeroNameAndFriends($episode: Episode!) {\n  hero(episode: $episode) {\n    ...heroFields\n  }\n\n}\n\nfragment heroFields on Character {\n  name\n  appearsIn\n  friends {\n    name\n  }\n}\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('{\n  "episode": "NEWHOPE"\n}\n')])])]),n("h3",{attrs:{id:"mutaion"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mutaion"}},[e._v("#")]),e._v(" Mutaion")]),e._v(" "),n("p",[e._v("修改以mutaion开始。\nepisode和review是需要的变量。\n中间的episode和stars是修改之后查询的结果。")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("mutation{\n  createReview(episode:NEWHOPE, review:{stars:3}){\n    episode\n    stars\n  }\n}\n")])])]),n("h3",{attrs:{id:"inline-fragments"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#inline-fragments"}},[e._v("#")]),e._v(" Inline Fragments")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("query HeroForEpisode($ep: Episode!) {\n  hero(episode: $ep){\n    name\n    id\n    appearsIn\n  }\n}\n")])])]),n("p",[e._v("当想查询Character字段时就没办法了，因为不知道是huamn还是droid,这时候就需要使用"),n("code",[e._v("inline fragment")]),e._v("了。")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("query HeroForEpisode($ep: Episode!) {\n  hero(episode: $ep){\n    name\n    id\n    appearsIn\n    ... on Droid {\n      primaryFunction\n    }\n  }\n}\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('{\n  search(text:"an"){\n    __typename\n    ... on Human{\n      name\n      height\n    }\n    ... on Starship{\n      name\n      coordinates\n    }\n  }\n}\n')])])]),n("h3",{attrs:{id:"resources"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#resources"}},[e._v("#")]),e._v(" resources")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/apollographql/starwars-server",target:"_blank",rel:"noopener noreferrer"}},[e._v("starwars-server"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/APIs-guru/graphql-voyager",target:"_blank",rel:"noopener noreferrer"}},[e._v("graphql-voyager"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=s.exports}}]);